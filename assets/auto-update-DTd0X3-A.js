import{E as u,a as f}from"./index-Cod9uyfw.js";let e;const l=/<script[^>]*src\s*=\s*["'](?<src>[^"']*)["'][^>]*>/gi;async function w(){const{origin:t,pathname:s}=window.location,n=t+s,o=await fetch(n+"?_timestamp="+Date.now()).then(i=>i.text());console.log(o,"html"),l.lastIndex=0;let a=[],c;for(;c=l.exec(o);)a.push(c.groups.src);return a}async function h(){const t=await w();if(console.log(t,"newScripts"),console.log(e,"lastSrcs"),!e)return e=t,!1;let s=!1;e.length!==t.length&&(s=!0);for(let n=0;n<e.length;n++)if(e[n]!==t[n]){s=!0;break}return e=t,s}function p(){return new Promise(t=>{u.confirm("检测到新功能已上线，请点击确定获取最新版本。","版本更新",{showClose:!1,closeOnClickModal:!1,showCancelButton:!1,confirmButtonText:"确定",type:"warning"}).then(()=>{f({type:"success",message:"获取最新版本成功，正在刷新页面..."}),setTimeout(()=>{t()},1e3)}).catch(s=>{})})}const g=2e3;function r(){setTimeout(async()=>{await h()&&(await p(),location.reload()),r()},g)}r();
